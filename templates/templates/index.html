<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Chronic Kidney Disease Prediction</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet" />
<style>
  body {
    font-family: 'Poppins', sans-serif;
    background: linear-gradient(120deg, #ffe5e5 0%, #fff7f7 50%, #ffd6d6 100%);
    min-height: 100vh;
    margin: 0;
    position: relative;
    overflow-x: hidden;
  }
  .background-blobs {
    position: fixed;
    top: 0; left: 0; width: 100vw; height: 100vh;
    z-index: 0;
    pointer-events: none;
  }
  .kidney-icon {
    position: fixed;
    top: 32px;
    width: 110px;
    height: 110px;
    z-index: 2;
    opacity: 0.92;
  }
  .kidney-left {
    left: 32px;
    transform: scaleX(-1) rotate(-8deg);
  }
  .kidney-right {
    right: 32px;
    transform: rotate(8deg);
  }
  .container {
    background: rgba(255,255,255,0.82);
    border-radius: 22px;
    box-shadow: 0 8px 32px rgba(255, 88, 88, 0.18), 0 1.5px 16px #ffb3b3;
    padding: 42px 32px 28px 32px;
    max-width: 480px;
    width: 100%;
    text-align: center;
    position: relative;
    margin: 56px auto 32px auto;
    backdrop-filter: blur(4px);
    z-index: 3;
  }
  h1 {
    color: #c62828;
    margin-bottom: 24px;
    font-size: 2.2rem;
    font-weight: 700;
    letter-spacing: 1px;
    text-shadow: 0 1.5px 0 #fff7f7;
  }
  form label {
    display: block;
    margin: 18px 0 6px 0;
    font-weight: 500;
    text-align: left;
  }
  form input[type="number"], form select {
    width: 100%;
    padding: 8px 10px;
    border: 1px solid #ffb3b3;
    border-radius: 6px;
    font-size: 1rem;
    margin-bottom: 4px;
    box-sizing: border-box;
    transition: border 0.2s, background 0.2s;
    background: #fff7f7;
  }
  form input[type="number"]:focus, form select:focus {
    border: 1.5px solid #c62828;
    outline: none;
    background: #fff0f0;
  }
  .button-row {
    display: flex;
    justify-content: space-between;
    margin-top: 22px;
  }
  button {
    background: linear-gradient(90deg, #ff5858, #ff7e5f);
    color: #fff;
    border: none;
    border-radius: 6px;
    padding: 10px 22px;
    font-size: 1rem;
    font-weight: 600;
    cursor: pointer;
    transition: background 0.2s, box-shadow 0.2s;
    box-shadow: 0 2px 8px rgba(255, 88, 88, 0.10);
  }
  button:hover {
    background: linear-gradient(90deg, #ff7e5f, #ff5858);
    box-shadow: 0 4px 16px rgba(255, 88, 88, 0.18);
  }
  #loading {
    display: none;
    margin-top: 18px;
    color: #c62828;
    font-weight: 500;
  }
  #result {
    margin-top: 18px;
    font-size: 1.1rem;
    font-weight: 500;
    display: none;
  }
  .positive {
    color: #2e7d32;
  }
  .negative {
    color: #c62828;
  }
  footer {
    margin-top: 32px;
    color: #d77;
    font-size: 0.97rem;
    letter-spacing: 0.5px;
  }
  @media (max-width: 700px) {
    .container {
      padding: 18px 6px 18px 6px;
      max-width: 98vw;
    }
    .kidney-icon {
      width: 64px;
      height: 64px;
      top: 10px;
      left: 8px;
      right: 8px;
    }
    .kidney-left { left: 8px; }
    .kidney-right { right: 8px; }
  }
</style>
</head>
<body>
  <!-- Animated background blobs for subtle depth -->
  <svg class="background-blobs" viewBox="0 0 1200 800">
    <ellipse cx="200" cy="200" rx="220" ry="120" fill="#ffb3b3" opacity="0.22"/>
    <ellipse cx="1000" cy="120" rx="180" ry="100" fill="#ff7e5f" opacity="0.13"/>
    <ellipse cx="600" cy="700" rx="320" ry="80" fill="#ff5858" opacity="0.10"/>
  </svg>
  <!-- SVG Kidney Icons -->
  <svg class="kidney-icon kidney-left" viewBox="0 0 64 64" fill="none">
    <ellipse cx="32" cy="32" rx="22" ry="28" fill="#ff7e5f"/>
    <ellipse cx="38" cy="28" rx="10" ry="16" fill="#fff7f7" opacity="0.5"/>
    <ellipse cx="26" cy="38" rx="7" ry="10" fill="#fff7f7" opacity="0.3"/>
    <path d="M32 60 Q18 52 18 32 Q18 12 32 4" stroke="#c62828" stroke-width="3" fill="none"/>
  </svg>
  <svg class="kidney-icon kidney-right" viewBox="0 0 64 64" fill="none">
    <ellipse cx="32" cy="32" rx="22" ry="28" fill="#ff7e5f"/>
    <ellipse cx="38" cy="28" rx="10" ry="16" fill="#fff7f7" opacity="0.5"/>
    <ellipse cx="26" cy="38" rx="7" ry="10" fill="#fff7f7" opacity="0.3"/>
    <path d="M32 60 Q18 52 18 32 Q18 12 32 4" stroke="#c62828" stroke-width="3" fill="none"/>
  </svg>
  <div class="container">
    <h1>Chronic Kidney Disease Prediction</h1>

    <form id="predict-form">
      <label for="feature1">Age(in years)</label>
      <input type="number" id="feature1" name="feature1" min="0" step="any" required />

      <label for="feature2">Blood pressure(in mmHg)</label>
      <input type="number" id="feature2" name="feature2" min="0" step="any" required />

      <label for="feature3">Specific gravity of urine</label>
      <input type="number" id="feature3" name="feature3" min="0" step="any" required />

      <label for="feature4">Albumin level in urine</label>
      <input type="number" id="feature4" name="feature4" min="0" step="any" required />

      <label for="feature5">Sugar in urine</label>
      <input type="number" id="feature5" name="feature5" min="0" step="any" required />

      <label for="feature6">Red Blood Cells</label>
      <select id="feature6" name="feature6" required>
        <option value="">Select</option>
        <option value="0">Abnormal</option>
        <option value="1">Normal</option>
      </select>

      <label for="feature7">Pus Cell count</label>
      <select id="feature7" name="feature7" required>
        <option value="">Select</option>
        <option value="0">Abnormal</option>
        <option value="1">Normal</option>
      </select>

      <label for="feature8">Pus Cell Clumps</label>
      <select id="feature8" name="feature8" required>
        <option value="">Select</option>
        <option value="0">Not Present</option>
        <option value="1">Present</option>
      </select>

      <label for="feature9">Bacteria in urine</label>
      <select id="feature9" name="feature9" required>
        <option value="">Select</option>
        <option value="0">Not Present</option>
        <option value="1">Present</option>
      </select>

      <label for="feature10">Blood Glucose Random</label>
      <input type="number" id="feature10" name="feature10" min="0" step="any" required />

      <label for="feature11">Blood Urea</label>
      <input type="number" id="feature11" name="feature11" min="0" step="any" required />

      <label for="feature12">Sodium level</label>
      <input type="number" id="feature12" name="feature12" min="0" step="any" required />

      <label for="feature13">Serum Creatinine</label>
      <input type="number" id="feature13" name="feature13" min="0" step="any" required />

      <label for="feature14">Potassium level</label>
      <input type="number" id="feature14" name="feature14" min="0" step="any" required />

      <label for="feature15">Hemoglobin level</label>
      <input type="number" id="feature15" name="feature15" min="0" step="any" required />

      <label for="feature16">Packed Cell Volume</label>
      <input type="number" id="feature16" name="feature16" min="0" step="any" required />

      <label for="feature17">White Cell count</label>
      <input type="number" id="feature17" name="feature17" min="0" step="any" required />

      <label for="feature18">Red Cell count</label>
      <input type="number" id="feature18" name="feature18" min="0" step="any" required />

      <label for="feature19">Hypertension</label>
      <select id="feature19" name="feature19" required>
        <option value="">Select</option>
        <option value="0">No</option>
        <option value="1">Yes</option>
      </select>

      <label for="feature20">Diabetes Mellitus</label>
      <select id="feature20" name="feature20" required>
        <option value="">Select</option>
        <option value="0">No</option>
        <option value="1">Yes</option>
      </select>

      <label for="feature21">Coronary Artery Disease</label>
      <select id="feature21" name="feature21" required>
        <option value="">Select</option>
        <option value="0">No</option>
        <option value="1">Yes</option>
      </select>

      <label for="feature22">Appetite</label>
      <select id="feature22" name="feature22" required>
        <option value="">Select</option>
        <option value="0">Good</option>
        <option value="1">Poor</option>
      </select>

      <label for="feature23">Pedal Edema</label>
      <select id="feature23" name="feature23" required>
        <option value="">Select</option>
        <option value="0">No</option>
        <option value="1">Yes</option>
      </select>

      <label for="feature24">Anemia</label>
      <select id="feature24" name="feature24" required>
        <option value="">Select</option>
        <option value="0">No</option>
        <option value="1">Yes</option>
      </select>

      <div class="button-row">
        <button type="submit" id="predict-btn">Predict</button>
        <button type="button" id="clear-btn">Clear</button>
      </div>
    </form>

    <div id="loading">Loading prediction...</div>
    <div id="result"></div>

    <footer>DSA AI/ML MCG PROJECT 2025</footer>
  </div>

<script>
  const form = document.getElementById('predict-form');
  const loading = document.getElementById('loading');
  const resultDiv = document.getElementById('result');
  const clearBtn = document.getElementById('clear-btn');

  form.addEventListener('submit', async (e) => {
    e.preventDefault();
    resultDiv.style.display = 'none';
    loading.style.display = 'block';

    const features = [
      Number(form.feature1.value),
      Number(form.feature2.value),
      Number(form.feature3.value),
      Number(form.feature4.value),
      Number(form.feature5.value),
      Number(form.feature6.value),
      Number(form.feature7.value),
      Number(form.feature8.value),
      Number(form.feature9.value),
      Number(form.feature10.value),
      Number(form.feature11.value),
      Number(form.feature12.value),
      Number(form.feature13.value),
      Number(form.feature14.value),
      Number(form.feature15.value),
      Number(form.feature16.value),
      Number(form.feature17.value),
      Number(form.feature18.value),
      Number(form.feature19.value),
      Number(form.feature20.value),
      Number(form.feature21.value),
      Number(form.feature22.value),
      Number(form.feature23.value),
      Number(form.feature24.value)
    ];

    if (features.some(isNaN)) {
      loading.style.display = 'none';
      resultDiv.style.display = 'block';
      resultDiv.className = '';
      resultDiv.style.color = 'red';
      resultDiv.textContent = 'Please fill in all fields with valid numbers.';
      return;
    }

    try {
      const response = await fetch('/predict', {
        method: 'POST',
        headers: {'Content-Type': 'application/json'},
        body: JSON.stringify({features})
      });

      loading.style.display = 'none';

      if (!response.ok) {
        const errorData = await response.json();
        resultDiv.className = '';
        resultDiv.style.color = 'red';
        resultDiv.textContent = 'Error: ' + (errorData.error || 'Unknown error');
      } else {
        const data = await response.json();
        // This will match CKD in any case, and assign red for CKD, green for NOTCKD
        resultDiv.className = (data.prediction && data.prediction.toString().toLowerCase() === 'ckd') ? 'negative' : 'positive';
        resultDiv.textContent = `Prediction: ${data.prediction} (Probability: ${data.probability})`;
      }
      resultDiv.style.display = 'block';

    } catch (err) {
      loading.style.display = 'none';
      resultDiv.className = '';
      resultDiv.style.color = 'red';
      resultDiv.textContent = 'Failed to fetch prediction. Try again later.';
      resultDiv.style.display = 'block';
    }
  });

  clearBtn.addEventListener('click', () => {
    form.reset();
    resultDiv.style.display = 'none';
  });
</script>
</body>
</html>

